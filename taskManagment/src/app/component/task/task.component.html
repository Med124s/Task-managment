<div class="container">
    <div class="row my-4">
        <div class="col-md-6">
            <h2>List Tasks</h2>
        </div>
        <div class="col-md-6 text-right">
            <button (click)="displayTask = !displayTask" class="btn btn-dark btn-sm">
                <i class="fa fa-plus"></i> New Task</button>
        </div>
    </div>

    <div class="row my-2" *ngIf ="displayTask">
        <div class="col-md-6 mx-auto">
            
                <div class="form-group my-3">
                    <label for="label">Task :</label>
                    <input [(ngModel)]="myTask.label" name="task" id="label" type="text" class="form-control">
                </div>
        
                <div class="form-check my-3">
                  <label class="form-check-label">
                    <input [(ngModel)]="myTask.completed" name="check" type="checkbox" class="form-check-input" value="checkedValue">
                    Completed
                  </label>
                </div>
                <button (click)="addTask()"  class="btn btn-success btn-block">
                    <i class="fa fa-send"></i>New Task
                </button>


        </div>
    </div>

    <div class="row">
        <div class="col-md-6 mx-auto my-2">
            <div class="form-group">
                <input (keyup)="search()" [(ngModel)]="searchText" placeholder="Search..." name="search" type="text" class="form-control">
            </div>
            <ul class="list-group">
                <li *ngFor="let t of tasksResult" class="list-group-item d-flex justify-content-between align-items-center">
                    <button (click)="deleteTask(t.id)" class="btn btn-dark btn-sm">
                        <i class="fa fa-trash"></i>
                    </button>
                    {{ t.label }}
                    <span style="cursor: pointer;" (click)="completed(t)" [ngClass]="
                    {
                        'badge-info':t.completed,
                        'badge-danger':!t.completed
                    }
                        " 
                    class="badge badge-secondary badge-pill">
                    <i class="fa" [ngClass]="{
                        'fa-thumbs-up':t.completed,
                        'fa-thumbs-down':!t.completed
                    }"></i>
                    
                    </span>
                    <button (click)="editTask(t)" data-toggle="modal" data-target="#updateTask" data-wathever="@update" class="btn btn-warning btn-sm">
                        <i class="fa fa-pencil"></i>
                    </button>
                </li>
                
            </ul>
            <!-- <app-list-tasks [tasks]="tasks" [tasksResult]="tasksResult" [myTask]="myTask"></app-list-tasks> -->
        </div>
    </div>
    
</div>


<div class="modal fade" id="updateTask" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Modifier le Task</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body" *ngIf="myTask">
         
            <div class="form-group my-3">
                <label for="label">Task :</label>
                <input [(ngModel)]="myTask.label" name="task" id="label" type="text" class="form-control">
            </div>
    
            <div class="form-check my-3">
              <label class="form-check-label">
                <input [(ngModel)]="myTask.completed" name="check"  type="checkbox" class="form-check-input" value="checkedValue">
                Completed
              </label>
            </div>
         
         
        </div>
        <div class="modal-footer">
            <button (click) ="updateTask(myTask)" type="button" class="btn btn-success btn-sm" data-dismiss="modal">Update</button>
            <button type="button" class="btn btn-warning btn-sm">Close</button>
          </div>
    </div>
    </div>
    </div>

    <!--PRACTIQUE INTERACTION COMPONENTS
    
    property binding []:ineraction class to template
    Data binding ():ineraction template to class
    TowayBinding [()]: to way class =>temp or temp =>class

    -->
    <!-- <input [ngClass]="{'active':available}" type="text" (ngModelChange)="infoUser($event)" [ngModel]="customerName" />
    <p>Your name {{username}}</p> -->

    <!-- View Child
        For Dom interaction
        # we give to input the reference
        and we declare view child

        <input #focusInput type="text">

    -->
        <!--For getter and setter interaction parent and child
        <button (click)="login()">Login</button>
        <button (click)="logout()">Logout</button>
    -->
<!-- <button (click)="send()">Login</button>
<app-update-task #child [logging]="loggedIn" ></app-update-task> -->
<!--getting parametter and method from child using template reference-->
<!-- <span>from child{{child.name}}</span>
<button (click)="child.getName()">say hi</button> -->